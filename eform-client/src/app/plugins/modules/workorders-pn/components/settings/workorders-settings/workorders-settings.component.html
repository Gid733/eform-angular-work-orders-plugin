<subheader-pn [title]="'Work Orders Settings' | translate"></subheader-pn>

<div class="container-fluid">
  <div class="row p-1 mt-4 table-responsive no-gutters">
    <table
      mdbTable
      striped="true"
      hover="true"
      small="true"
      class="z-depth-1 text-center"
    >
      <thead>
      <tr>
        <th scope="col" class="table-header-sortable" id="idTableHeader">
          <div class="d-flex align-items-center justify-content-center">
            ID
          </div>
        </th>
        <th scope="col" id="nameHeader">
          {{ 'Site name' | translate }}
        </th>
        <th scope="col" id="actionsHeader">
          {{ 'Actions' | translate }}
        </th>
      </tr>
      </thead>
      <tbody id="tableBody">
      <tr
        *ngFor="
            let siteDto of workOrdersSettingsModel?.assignedSites;
            let i = index
          "
      >
        <td id="workOrderSiteId">
          {{ siteDto.siteUId }}
        </td>
        <td id="workOrderSiteName">
          {{ siteDto.siteName }}
        </td>
        <td id="workOrderSiteActions">
          <button mdbBtn class="btn-danger btn-icon mb-2"
                  (click)="showRemoveSiteModal(siteDto)"
                  mdbTooltip="{{ 'Remove site' | translate }}">
            <fa-icon icon="trash-alt" [fixedWidth]="true" size="lg"></fa-icon>
          </button>
        </td>
      </tr>
      </tbody>
    </table>
  </div>
  <div
    class="row p-1 my-4 mx-2"
    *ngIf="workOrdersSettingsModel?.assignedSites.length === 0"
  >
    <span>{{ 'No assigned sites found' | translate }}</span>
  </div>
  <div class="row justify-content-end">
    <div class="col-md-1">
      <button
        id="addNewSiteBtn"
        class="btn btn-sm btn-success"
        mdbTooltip="{{ 'Add new site' | translate }}"
        (click)="showAddNewSiteModal()"
      >
        <fa-icon icon="user-plus" size="lg" [fixedWidth]="true"></fa-icon>
        {{ 'Add site' | translate }}
      </button>
    </div>
  </div>
</div>

<app-settings-add-site-modal #addSiteModal (siteAdded)="getSettings()"></app-settings-add-site-modal>
<app-settings-remove-site-modal #removeSiteModal (siteRemoved)="getSettings()"></app-settings-remove-site-modal>
